%h1.aktivmeldung= @title
%div.form
  %legend
    %p 
      Bitte fülle das folgende 
      %strong Formular vollständig 
      mit den Details des
      %strong neu anzulegenden Benutzers.
    %p 
      Dieses Formular bitte
      %strong nicht für Bandaufnahmen bzw. Bandverleihungen
      verwenden, da hierdurch sonst doppelte Mitglieder-Einträge entstehen!
      Wende Dich im Zweifel bitte an:
      %a{href: "mailto:support@wingolf.org"} support@wingolf.org

  = semantic_form_for @user, action: :create do |f|

    = f.semantic_errors :state

    = f.inputs do
    
      %h2 Grundlegende Informationen
      
      = f.input :first_name, required: true
      = f.input :last_name, required: true
      = f.input :date_of_birth, as: 'date_select', required: true, start_year: 1900, end_year: Time.now.year - 15
      
      %h2 Verbindung
      
      - corporations_collection = current_user.administrated_aktivitates.collect(&:corporation)
      - # Pre-select corporation if only one:
      - @user.add_to_corporation = corporations_collection.first.id if corporations_collection.count == 1
      
      = f.input :add_to_corporation, as: :select, label: t(:register_in), collection: corporations_collection
      = f.input :aktivmeldungsdatum, as: 'date_select'

      %h2 Kontaktdaten
      
      = f.input :study_address, as: 'text', input_html: {rows: 4}, required: true
      = f.input :home_address, as: 'text', input_html: {rows: 4}, required: true
      = f.input :email, as: 'email', required: true
      = f.input :phone, as: 'phone'
      = f.input :mobile, as: 'phone', required: true
      
      %h2 Benutzerkonto
      
    
      = f.input :create_account, as: :boolean
      //- if @group
      //  - sub_groups = @group.descendant_groups
      //  = f.input( :add_to_group, as: :select, label: t( :register_in ), collection: sub_groups, hint: ( "(" + link_to( @group.name, @group ).html_safe + ")" ).html_safe )
      - if false
        // <span id="gender">
        // <%= f.input :female, as: :select, label: t( :gender ), 
        // collection: [[ t( :male ), false ], [ t( :female ), :true ]], 
        //default: :male 

    = f.actions do
      = f.action :submit, label: 'Aktivmeldung bestätigen', button_html: {class: 'btn btn-large btn-primary'}
  
  .progress.alert.alert-info.hidden
    %strong Aktivmeldung wird eingetragen. Bitte warten.
    Dies kann bis zu zwei Minuten dauern. 
    Danach wirst Du zur Startseite der Plattform weitergeleitet.

  %div.footnotes
    * 
    = t :fields_have_to_be_given


